<h2>Sign up</h2>

<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <%= render "devise/shared/error_messages", resource: resource %>

  <div class="field">
  <%= f.label :"アイコン" %><br />
  <%= f.file_field :icon, id: 'icon_input' %>
  <br>
  <img id="icon_preview" src="#" alt="Icon Preview" style="display: none; width: 5rem; height: 5rem;">
</div>

  <div class="field">
    <%= f.label :"苗字" %><br />
    <%= f.text_field :last_name, placeholder: "例:田中" %>
  </div>

  <div class="field">
    <%= f.label :"名前" %><br />
    <%= f.text_field :first_name, placeholder: "例:太郎"%>
  </div>

  <div class="field">
    <%= f.label :"ユーザネーム" %><br />
    <%= f.text_field :nick_name, placeholder: "例:yamada"%>
  </div>

  <div class="field">
    <%= f.label :"電話番号(ハイフンなし)" %><br />
    <%= f.text_field :phone_number, placeholder: 123456789 %>
  </div>

  <div class="field">
    <%= f.label :"メールアドレス" %><br />
    <%= f.email_field :email, autofocus: true, autocomplete: "email", placeholder: "tarou@example.com" %>
  </div>

  <div class="field">
    <%= f.label :"パスワード" %>
    <% if @minimum_password_length %>
    <em>(<%= @minimum_password_length %>文字以上)</em>
    <% end %><br />
    <%= f.password_field :password, autocomplete: "new-password" %>
  </div>

  <div class="field">
    <%= f.label :"確認用パスワード" %><br />
    <%= f.password_field :password_confirmation, autocomplete: "new-password" %>
  </div>

  <div class="field">
    <%= f.label :"郵便番号(ハイフンなし)" %><br />
    <%= f.text_field :postal_code, placeholder: 123456789 %>
  </div>

  <div class="field">
    <%= f.label :"都道府県" %><br />
    <%= f.select :prefecture,
      [ ["北海道", 0],["青森県", 1],["岩手県", 2],["宮城県", 3],["秋田県", 4],
        ["山形県", 5],["福島県", 6],["茨城県", 7],["栃木県", 8],["群馬県", 9],
        ["埼玉県", 10],["千葉県", 11],["東京都", 12],["神奈川県", 13],["新潟県", 14],
        ["富山県", 15],["石川県", 16],["福井県", 17],["山梨県", 18],["長野県", 19],
        ["岐阜県", 20],["静岡県", 21],["愛知県", 22],["三重県", 23],["滋賀県", 24],
        ["京都府", 25],["大阪府", 26],["兵庫県", 27],["奈良県", 28],["和歌山県", 29],
        ["鳥取県", 30],["島根県", 31],["岡山県", 32],["広島県", 33],["山口県", 34],
        ["徳島県", 35],["香川県", 36],["愛媛県", 37],["高知県", 38],["福岡県", 39],
        ["佐賀県", 40],["長崎県", 41],["熊本県", 42],["大分県", 43],["宮崎県", 44],
        ["鹿児島県", 45],["沖縄県", 46]
      ], include_blank: "都道府県を選択して下さい"%>
  </div>

  <div class="field">
    <%= f.label :"市区町村" %><br />
    <%= f.text_field :municipality, placeholder: "⚪⚪︎市××区" %>
  </div>

  <div class="field">
    <%= f.label :"以降の住所" %><br />
    <%= f.text_field :street_address, placeholder: "⚪︎丁目⚪︎番地 ××マンション △△号室" %>
  </div>

  <div class="field">
    <%= f.label :"移動可能範囲" %><br />
    <%= f.select :movable_range,
    [["0~50km", 0],["50~100km", 1],["100~200km", 2],["それ以上可能", 3]], include_blank: "移動可能範囲を選択してください"%>
  </div>

  <div class="field">
    <%= f.label :"性別" %><br />
    <%= f.select :sex,
    [["男", 0],["女", 1],["その他", 2]], include_blank: "性別を選択してください"%>
  </div>

  <div class="field">
    <%= f.label :"職業" %><br />
    <%= f.select :occupation,
    [["会社員", 0],["学生", 1],["その他", 2]], include_blank: "職業を選択してください"%>
  </div>

  <div class="field">
    <%= f.label :"自己紹介" %><br />
    <%= f.text_field :self_introduction, placeholder: "よろしくお願いいたします。" %>
  </div>

  <div class="actions">
    <%= f.submit "Sign up" %>
  </div>
<% end %>

<%= render "devise/shared/links" %>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const inputElement = document.getElementById('icon_input');
    const previewElement = document.getElementById('icon_preview');

    inputElement.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          previewElement.setAttribute('src', e.target.result);
          previewElement.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        previewElement.style.display = 'none';
      }
    });
  });
</script>